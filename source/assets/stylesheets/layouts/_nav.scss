nav {
  @include position(absolute, 0 null null null);
  width: 100%;
  min-height: 100px;
  background-color: rgba(65,65,65,0);
  z-index: 10;
  overflow: hidden;
  @include transition(background-color .25s linear, min-height 0s linear .3s, max-height 0s linear .3s);
  .nav-links {
    @include position(absolute, 38% null null null);
    width: 100%;
    text-align: center;
    display: none;
    opacity: 0;
    @include transition(opacity .25s linear .1s);
    @include media($medium-screen) {
      width: initial;
      @include position(absolute, 58px null null null);
    }
    & > div {
      a {
        color: white;
        text-decoration: none;
        display: block;
        font-size: $font-size-large;
        padding: 10px;
        font-weight: normal;
      }
      &.extend {
        & > div {
          display: none;
          @include media($medium-screen) {
            display: block;
            @include transition(opacity .25s linear .08s);
            @include position(absolute, 65% null null 50%);
            @include transform(translate(-50%,0));
            opacity: 0;
            width: auto;
            background: white;
            padding: 8px 0 8px;
            border-radius: 4px;
            backface-visibility: hidden;
            box-shadow: 0 6px 14px rgba(0,0,0,.3);
            & > a {
              float: none;
              display: block;
              text-align: left;
              white-space: nowrap;
              line-height: 2;
              padding: 0 34px 0 17px;
              font-weight: 400;
              font-size: small;
              text-transform: none;
              text-align: left;
              color: $secondary-color;
              opacity: 1;
              &:hover {
                opacity: 1;
                background-color: $primary-color;
                color: $white;
              }
            }
          }
        }
        @include media($medium-screen) {
          &:hover, &.open {
            & > div {
              display: block;
              opacity: 1;
            }
          }
        }
      }
    }
    @include media($medium-screen) {
      opacity: 1;
    }
  }
  .logo-left {
    @include position(absolute, 5px null null 12px);
    a {
      margin-left: 20px;
      background-image: url('/assets/images/phantom.svg');
      background-size: 100%;
      background-position: left top;
      background-repeat: no-repeat;
      text-indent: -9000px;
      width: 48px;
      height: 95px;
      padding: 0;
      display: block;
    }
  }
  .navtoggle {
    @include position(absolute, 0 0 null null);
    width: 70px;
    font-size: 12px;
    color: white;
    padding-top: 26px;
    padding-bottom: 10px;
    span {
      position: relative;
      width: 15px;
      height: 12px;
      display: inline-block;
      vertical-align: middle;
      margin-left: 5px;
    }
    i {
      display: block;
      width: 100%;
      height: 2px;
      background: white;
      @include position(absolute, 0 null null 0);
      @include transition(all .3s linear);
      &:nth-child(2) {
        margin-top: 4px;
        width: 10px;
      }
      &:last-child {
        margin-top: 8px;
        width: 13px;
      }
    }
  }
  &.open {
    @include position(fixed, 0 0 0 0);
    /* width: 100%; */
    height: 100%;
    min-height: 100%;
    max-height: 100%;
    @include transition(background-color .25s linear, min-height 0s linear 0s, max-height 0s linear 0s);
    background-color: rgba(65,65,65,.8);
    .nav-links {
      display: block;
      opacity: 1;
    }
    .navtoggle {
      i {
        &:first-child {
          @include transform(translate(0,4px) rotate(45deg));
        }
        &:nth-child(2) {
          display: none;
        }
        &:last-child {
          width: 100%;
          @include transform(translate(0,-4px) rotate(-45deg));
        }
      }
    }
  }
  &:not(.open) {
    @include media($medium-screen) {
      $nav-height: 100px;
      @include position(absolute, 15px null null 50%);
      @include transform(translate(-50%,0));
      height: $nav-height;
      /* width: 100%; */
      max-width: 1440px;
      overflow: visible;
      .navtoggle {
        display: none;
      }
      .nav-links {
        @include position(absolute, 0 0 auto auto);
        float: right;
        display: block;
        height: $nav-height;
        padding-right: 12px;
        @include transform(none);
        white-space: nowrap;
        @include clearfix;
        & > div {
          display: inline-block;
          text-align: right;
          padding-left: 1%;
          position: relative;
          @include media($large-screen) {
            padding-left: 3%;
          }
          a {
            padding: 0 10px;
            line-height: $nav-height;
            font-size: $font-size-x-small;
            font-weight: 300;
            opacity: 1;
            @include transition(opacity .25s linear);
            // Possible fix to some weird shifting and bluring when fonts land on sub pixels
            // http://stackoverflow.com/questions/15464055/css-transition-effect-makes-image-blurry-moves-image-1px-in-chrome
            backface-visibility: hidden;
            transform: translateZ(0) scale(1.0, 1.0);
            // end fix
          }
          &.extend > a {
            &:after {
              content: '';
              @include triangle(6px, $white, down);
              display: inline-block;
              vertical-align: middle;
              margin-left: 10px;
            }
          }
        }
      }
      .logo-left {
        @include position(absolute, 5px null null 12px);
        z-index: 3;
        @include media($large-screen) {
          @include position(absolute, 5px null null 12px);
        }
        a {
          background-image: url('/assets/images/phantom.svg');
          background-size: 100%;
          background-position: left top;
          background-repeat: no-repeat;
          text-indent: -9000px;
          /* width: $nav-height; */
          /* height: $nav-height; */
          padding: 0;
          opacity: 1;
          @include transition(opacity .25s linear);
          // Possible fix to some weird shifting and bluring when fonts land on sub pixels
          // http://stackoverflow.com/questions/15464055/css-transition-effect-makes-image-blurry-moves-image-1px-in-chrome
          backface-visibility: hidden;
          transform: translateZ(0) scale(1.0, 1.0);
          // end fix
        }
      }
      &:hover {
        .nav-links {
          & > div {
            & > a {
              opacity: .45;
              &:hover {
                opacity: 1;
                color: $white;
              }
            }
          }
        }
        .logo-left a {
          opacity: .45;
          &:hover {
            opacity: 1;
          }
        }
      }
    }
    @include media($large-screen) {
      $nav-height: 100px;
      height: $nav-height;
      .logo-left a {
        margin-left: 20px;
        width: 48px;
        height: 95px;
      }
      .nav-links {
        margin-right: 30px;
        $nav-height: 100px;
        height: $nav-height;
        & > div a {
          line-height: $nav-height;
        }
      }
    }
    @include media($x-large-screen) {
      $nav-height: 100px;
      height: $nav-height;
      .logo-left a {
        margin-left: 20px;
        width: 48px;
        height: 95px;
        padding: 0;
      }
      .nav-links {
        margin-right: 30px;
        height: $nav-height;
        & > div a {
          font-size: $font-size-small;
          line-height: $nav-height;
        }
      }
    }
  }
}

